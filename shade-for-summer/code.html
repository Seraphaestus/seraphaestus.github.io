<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Shade for Summer</title>
		<base href="https://seraphaestus.github.io/shade-for-summer/index.html"/>
		
		<link rel="stylesheet" type="text/css" href="./styles.css"/>
		<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.20.0/themes/prism-twilight.min.css" rel="stylesheet" />
		
		<!-- For html reuse -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	</head>
	
	<body>
		<header></header>
		<script>$.get("components/header.html", function(data){ $("header").append(data); });</script>
		
		<div class="content flex-container">
			<div style="flex: 1 1 60%; margin: 0 1em 3.5em 1em;">
				<div id="uniform-area" style="display: flex; flex-wrap: wrap"></div>
				<div class="editor language-glsl" style="margin-top:0.5em">void main() {
	COLOR = vec4(0.15, 0.15, 0.15, 1.0);
}</div>
			</div>
			<div id="canvas-area", style="flex: 1 1 40%;">
				<!-- Text in canvas element shows only if canvas is unsupported. -->
				<div id="postcard" style="rotate: 5deg;">
					<canvas id="target-canvas">Sorry, your browser does not seem to support HTML canvas :(</canvas>
					<p>Postcard Caption</p>
				</div>
				<div id="editable-canvas-area" style="top: -4.5em">
					<canvas id="editable-canvas" style="scale: 87.5%;">Sorry, your browser does not seem to support HTML canvas :(</canvas>
					<div class="easel" style="background: #e7aa6a; height: 1.5em; margin-inline: 3em; margin-top: -1.5em; position: relative; z-index: -1;"></div>
				</div>
				
				<div style="position: fixed; top: 1em; right: 0.5em;">
					<label class="switch" title="Toggle canvas view">
						<input id="canvas-view-toggle" type="checkbox"><span></span>
					</label><br>
					<label title="Overlay canvases" style="visibility: hidden;">
						<input id="canvas-view-slider" class="vertical-slider" type="range" min="0" max="100" value="0">
					</label>
				</div>
			</div>
		</div>
		
		<script type="text/javascript" src="scripts/webgl-utils.js"></script>
		<script type="text/javascript" src="scripts/canvas.js"></script>
		<script type="text/javascript" src="scripts/main.js"></script>
		
		<!-- CodeJar scripts -->
		<script type="module" id="code">
			import {CodeJar} from "https://medv.io/codejar/codejar.js?"
			
			const editor = document.querySelector(".editor");
			codeJar = new CodeJar(editor, el => Prism.highlightElement(el));
			// Register event handler to update canvas + save code on code edited
			codeJar.onUpdate(code => {
				updateCanvas(editableCanvas, code);
				localStorage.setItem('code', code);
			})
			// Load saved code from local
			const loaded_code = localStorage.getItem('code');
			if (loaded_code) codeJar.updateCode(loaded_code);
			
		</script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.20.0/components/prism-core.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.20.0/plugins/autoloader/prism-autoloader.min.js"></script>

	</body>
</html>